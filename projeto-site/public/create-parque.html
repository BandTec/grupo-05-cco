<!DOCTYPE html>
<html lang="pt-br">

<head>
    <link rel="shortcut icon" type="image/png" href="images/icon.png" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Humildificadores | Registrar Parque</title>
    <link rel="stylesheet" href="stylesheets/create.css">
    <link rel="stylesheet" href="stylesheets/reset.css">
    <script src="js/sorteio.js"></script>
    <script src="js/grafico.js"></script>
    <script src="js/jquery-1.11.1.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@700&display=swap" rel="stylesheet">
    <!-- <link rel="stylesheet" href="stylesheets/bootstrap.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
    <link rel="stylesheet" href="stylesheets/bootstrap.min.css"> -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>
    <script type="text/javascript" src="funcoes.js"></script>
</head>

<body>
     
    <nav class="main-menu">
        <ul>
            
            <li>
                <a href="index.html">
                    <i class="fa fa-home fa-2x"></i>
                    <span class="nav-text">
                        Home - Inicio
                    </span>
                </a>

            </li>
            <li class="has-subnav">
                <a href="create-parque.html">
                    <i class="fa fa-plus fa-2x"></i>
                    <span class="nav-text">
                        Inserir Parque
                    </span>
                </a>

            </li>
            <li class="has-subnav">
                <a href="create-evento.html"> 
                    <i class="fa fa-plus fa-2x"></i>
                    <span class="nav-text">
                        Inserir Evento
                    </span>
                </a>

            </li>
            <li class="has-subnav">
                <a href="select-parque.html">
                    <i class="fa fa-table fa-2x"></i>
                    <span class="nav-text">
                        Select parque
                    </span>
                </a>

            </li>
            <li>
                <a href="select-cliente.html">
                    <i class="fa fa-table fa-2x"></i>
                    <span class="nav-text">
                        Select Cliente
                    </span>
                </a>
            </li>
            
        </ul>

        <ul class="logout">
            <li>
                <a href="#">
                    <i class="fa fa-power-off fa-2x"></i>
                    <span class="nav-text">
                        Logout
                    </span>
                </a>
            </li>
        </ul>
    </nav>
    <div class="header-create">
        <div class="title">
            <br>
            <h1>Registrar Parques</h1>
        </div>
    </div>
    <div class="create">
        <div class="container">
            
            <div class="content-create">
                <div class="part-create">
                    <form action="" id="form_cadastro" method="post" onsubmit="return cadastrar()"><br>
                        Endereço para converter as imagens: <a href="https://imgur.com/upload">Imgur</a> <br><br>
                        Nome do Parque: <input type="text" name="inputNome" id="inputNome" required placeholder="Insira aqui">
                        CPF: <input type="text" name="inputCpf" id="inputCpf" required placeholder="1234567890"> <br> 
                        Area: <input type="text" name="inputArea" id="inputArea" required placeholder="90000"> <span id="example-metros">em m2 (metros quadrados)</span> <br>
                        
                        <img src="" id="img" style="height: 200px;"><br>
                        Imagem do Parque: <input type="url" name="inputImgParque" required id="inputImgParque" onchange="img.src = inputImgParque.value" placeholder="Insira o link aqui"><br>
                        
                         
                        Localização: <input type="text" name="inputLocalizacao" required id="inputLocalizacao" placeholder="Av. Avenida de Avenida">
                         <center><button id="btn_entrar">Salvar</button></center> 
                         <br> <br>
                    </form>
                </div>
            </div>
            
        </div>
    
</body>
</html>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>

<script>

function cadastrar() {
        aguardar();
        var formulario = new URLSearchParams(new FormData(form_cadastro));
        fetch("/usuarios/registrar-parque", {
            method: "POST",
            body: formulario
        }).then(function(response) {
            
            if (response.ok) {

                window.location.href = 'dashboard.html';

            } else {

                console.log('Erro de registro!');
                response.text().then(function(resposta) {});
                finalizar_aguardar();
            }
        });

        return false;
    }

    function aguardar() {
        btn_entrar.disabled = true;
    }

    function finalizar_aguardar() {
        btn_entrar.disabled = false;
    }

</script>